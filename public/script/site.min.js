$(function(){babyFeeds.init()});var babyFeeds={init:function(){babyFeeds.ui.updateFeedVolumeLabel(),$("#input-feed-volume").off().bind("input",babyFeeds.ui.updateFeedVolumeLabel),$("#button-feed-save").off().click(babyFeeds.userActions.saveFeed),babyFeeds.server.load(function(o){console.log(o),$("#bottle-area").show(),$("#feed-area").show(),babyFeeds.ui.buildTimeInput(),babyFeeds.ui.buildHistoryCalendars();var r=0,d="",s=138,l=s-27;$(o.feedsForToday).each(function(e,t){r+=t.Milliliters;var a=t.Milliliters/o.feedRequiredForToday,i=s-l*a,n=l*a;s-=n,d+='<rect class="bottle-fill-'+(e%2+1)+'" y="'+i+'" width="75" height="'+n+'"/>'}),$("#bottle-fills").html(d);var e=o.feedRequiredForToday-r;if(0<e)$("#remaining-today-area span").text(e);else{$("#remaining-today-area").hide();var t=0,a=function(){t++%2?$("#bottle-overflow").show():$("#bottle-overflow").hide(),t<8&&window.setTimeout(a,500)};a()}$(o.feedTotalsPerDay).each(function(e,t){for(var a=moment(t.Date).format("MM/DD/YYYY"),i=t.Percent,n=10,o=1,r=70;r<110;r+=5){if(i<r){n=o;break}o++}$(".day[data-day="+a.replace(/\//g,"\\/")+"]").addClass("tier"+n).text(i+"%")})})},ui:{buildTimeInput:function(){$("#input-feed-time").datetimepicker({inline:!0,format:"LT"}),$("#input-feed-time .timepicker button").removeClass("btn").removeClass("btn-primary"),$("#input-feed-time .timepicker-picker table.table-condensed tr:first").hide(),$("#input-feed-time .timepicker-picker table.table-condensed tr:nth-child(3)").hide()},buildHistoryCalendars:function(){$("#input-history-last-month").datetimepicker({inline:!0,date:moment().subtract(1,"months").format("YYYY-MM-DD")}),$("#input-history-current-month").datetimepicker({inline:!0,date:moment().format("YYYY-MM-DD")}),$(".datepicker .picker-switch").attr("colspan",7).attr("data-action",""),$(".datepicker .old").text(""),$(".datepicker .new").text(""),$(".datepicker .day").attr("data-action","").removeClass("active").removeClass("today").removeClass(function(e,t){return(t.match(/(^|\s)tier\S+/g)||[]).join(" ")}).text("")},updateFeedVolumeLabel:function(){$("#label-feed-volume span").html($("#input-feed-volume").val())}},userActions:{saveFeed:function(e){e.preventDefault();var t=moment().format("YYYY-MM-DD");if(parseInt($("#input-feed-time").datetimepicker("date").format("HH"))-2>moment().hours())t=moment().subtract(1,"days").format("YYYY-MM-DD");t+=" "+$("#input-feed-time").datetimepicker("date").format("HH:mm");var a=$("#input-feed-volume").val();babyFeeds.server.saveFeed(t,a,function(){babyFeeds.init()})}},server:{load:function(e){$.ajax({type:"GET",url:"/api/load",contentType:"application/json",success:e})},saveFeed:function(e,t,a){$.ajax({type:"POST",url:"/api/savefeed",data:JSON.stringify({dateTime:e,milliliters:t}),contentType:"application/json",success:a})}}};
//# sourceMappingURL=site.min.js.map